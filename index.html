<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Y2026 CDG 肯恰那 叮叮叮</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Playfair+Display:wght@700&display=swap');
        
        :root {
            --warm-terracotta: #E2725B;
            --sunny-gold: #FFD700; /* 金黃色 */
            --bg-sand: #FAF7F2;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg-sand);
            color: #4A4A4A;
            -webkit-tap-highlight-color: transparent;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .content-overlap {
            margin-top: -40px;
            border-top-left-radius: 35px;
            border-top-right-radius: 35px;
            background-color: var(--bg-sand);
            position: relative;
            z-index: 20;
        }

        .app-card {
            border-radius: 24px;
            box-shadow: 0 8px 20px -4px rgba(226, 114, 91, 0.15);
        }

        /* 日期選中改為金黃色 */
        .date-item-active {
            background-color: var(--sunny-gold) !important;
            color: #4B3F00 !important; /* 深棕色文字提高對比 */
            transform: scale(1.08);
            box-shadow: 0 6px 15px rgba(255, 215, 0, 0.4);
            font-weight: bold;
        }

        .glass-tab {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(226, 114, 91, 0.2);
        }

        .title-font { font-family: 'Playfair Display', serif; }
        
        .expense-badge {
            font-size: 10px;
            padding: 2px 8px;
            border-radius: 99px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div id="app" class="max-w-md mx-auto min-h-screen pb-24 relative bg-[#FAF7F2] shadow-2xl">
    
    <header class="relative w-full h-[250px] overflow-hidden">
        <img src="https://images.unsplash.com/photo-1555881400-74d7acaacd8b?q=80&w=1920&auto=format&fit=crop" 
             alt="Porto Banner" class="w-full h-full object-cover">
        
        <nav class="absolute bottom-12 right-4 flex gap-2 z-30">
            <button @click="currentTab = 'itinerary'" :class="tabStyle('itinerary')">
                <i data-lucide="map" class="w-5 h-5"></i>
            </button>
            <button @click="currentTab = 'info'" :class="tabStyle('info')">
                <i data-lucide="info" class="w-5 h-5"></i>
            </button>
            <button @click="currentTab = 'shopping'" :class="tabStyle('shopping')">
                <i data-lucide="shopping-cart" class="w-5 h-5"></i>
            </button>
            <button @click="currentTab = 'expense'" :class="tabStyle('expense')">
                <i data-lucide="coins" class="w-5 h-5"></i>
            </button>
        </nav>

        <div class="absolute top-10 left-6 text-white drop-shadow-lg text-left">
            <h1 class="title-font text-2xl">Y2026 CDG</h1>
            <p class="text-sm font-bold tracking-widest">肯恰那 叮叮叮</p>
        </div>
    </header>

    <main class="content-overlap p-5">
        
        <div v-show="currentTab === 'itinerary'">
            <div class="app-card bg-white p-4 mb-6 flex justify-between items-center border-b-4 border-yellow-400">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-orange-50 rounded-full">
                        <i :data-lucide="cityWeather.icon" class="w-8 h-8 text-orange-400"></i>
                    </div>
                    <div>
                        <div class="text-[10px] text-orange-400 font-bold uppercase tracking-tighter">Current Weather</div>
                        <div class="text-xl font-bold text-slate-700">{{ cityWeather.temp }}°C <span class="text-sm font-normal text-slate-400">{{ cityWeather.status }}</span></div>
                    </div>
                </div>
                <div class="text-right text-xs">
                    <div class="font-bold text-slate-500">{{ cityWeather.city }}</div>
                    <div class="text-slate-400 italic">Feels like {{ cityWeather.feel }}°C</div>
                </div>
            </div>

            <div class="flex overflow-x-auto no-scrollbar gap-3 mb-6 py-2 px-1">
                <div v-for="day in travelDates" :key="day.date" 
                     @click="selectedDate = day.date"
                     class="flex-shrink-0 w-14 py-3 rounded-2xl flex flex-col items-center transition-all duration-300 bg-white text-slate-400 shadow-sm"
                     :class="{'date-item-active': selectedDate === day.date}">
                    <span class="text-[10px] uppercase font-bold">{{ day.weekday }}</span>
                    <span class="text-lg font-bold">{{ day.dayNum }}</span>
                </div>
            </div>

            <div id="itinerary-list" class="space-y-4">
                <div v-for="(item, index) in filteredItinerary" :key="item.id">
                    <div v-if="index > 0" class="flex flex-col items-center my-1 ml-10 opacity-30">
                        <div class="w-0.5 h-6 border-l-2 border-dotted border-orange-400"></div>
                        <i :data-lucide="item.transportMode || 'walking'" class="w-3 h-3 text-orange-500"></i>
                    </div>
                    <div :class="['app-card p-4 relative transition-all active:scale-95', item.category === 'flight' ? 'bg-orange-500 text-white' : 'bg-white shadow-sm']">
                        <div class="flex gap-4">
                            <div :class="['p-3 rounded-2xl', item.category === 'flight' ? 'bg-orange-400' : 'bg-orange-50']">
                                <i :data-lucide="getIcon(item.category)" :class="['w-6 h-6', item.category === 'flight' ? 'text-white' : 'text-orange-500']"></i>
                            </div>
                            <div class="flex-1 text-left">
                                <div class="flex justify-between items-start">
                                    <h3 class="font-bold text-lg leading-tight">{{ item.name }}</h3>
                                    <button @click="openMap(item.name)" :class="item.category === 'flight' ? 'text-white' : 'text-blue-500'">
                                        <i data-lucide="navigation" class="w-5 h-5"></i>
                                    </button>
                                </div>
                                <div class="mt-2 text-[11px] p-2 rounded-xl" :class="item.category === 'flight' ? 'bg-white/20 text-white' : 'bg-orange-50/50 text-slate-500 italic'">
                                    {{ item.note }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-show="currentTab === 'info'" class="space-y-6">
            <div class="app-card bg-white p-5 border-t-4 border-blue-400 shadow-sm">
                <div class="flex items-center gap-2 mb-4 font-bold text-blue-600 italic">
                    <i data-lucide="refresh-cw" class="w-5 h-5"></i> EUR to TWD
                </div>
                <div class="flex items-center gap-3">
                    <input type="number" v-model="calcEuro" class="w-full px-4 py-3 bg-slate-50 rounded-2xl text-xl font-bold outline-none border focus:border-blue-200">
                    <span class="text-slate-300">➔</span>
                    <div class="w-full px-4 py-3 bg-blue-50 rounded-2xl text-xl font-bold text-blue-600">
                        {{ (calcEuro * 35.8).toFixed(0) }} <span class="text-xs">TWD</span>
                    </div>
                </div>
            </div>
            <div class="app-card bg-white p-5 border-t-4 border-orange-400 shadow-sm">
                <h3 class="font-bold mb-4 flex items-center gap-2 text-orange-600"><i data-lucide="home" class="w-5 h-5"></i> Stay Info</h3>
                <div class="space-y-3 text-xs">
                    <div v-for="stay in staysInfo" class="border-b pb-2 flex justify-between items-end">
                        <div class="text-left">
                            <div class="font-bold text-slate-700">{{ stay.loc }}</div>
                            <div class="text-slate-400 mt-1">{{ stay.name }}</div>
                        </div>
                        <div class="text-orange-500 font-bold">{{ stay.date }}</div>
                    </div>
                </div>
            </div>
        </div>

        <div v-show="currentTab === 'shopping'" class="space-y-4 text-left">
            <h2 class="title-font text-xl font-bold">Shopping Wishlist</h2>
            <div class="grid grid-cols-2 gap-4">
                <div v-for="i in 2" class="app-card bg-white h-40 flex flex-col items-center justify-center text-slate-300 border-2 border-dashed border-slate-100">
                    <i data-lucide="plus-circle" class="w-8 h-8 mb-2"></i>
                    <span class="text-xs">新增清單</span>
                </div>
            </div>
        </div>

        <div v-show="currentTab === 'expense'" class="space-y-6">
            <div class="app-card bg-slate-800 p-6 text-white text-center relative overflow-hidden shadow-xl">
                <div class="relative z-10">
                    <div class="text-xs opacity-60 mb-1 font-bold tracking-widest uppercase">Total Expenses</div>
                    <div class="text-4xl font-bold title-font text-yellow-400">€ {{ totalExpenseAmount.toLocaleString() }}</div>
                    <div class="text-[10px] mt-2 opacity-40">≈ NT$ {{ (totalExpenseAmount * 35.8).toLocaleString() }}</div>
                </div>
                <i data-lucide="banknote" class="absolute -bottom-4 -right-4 w-24 h-24 text-white/5 rotate-12"></i>
            </div>

            <div class="space-y-3">
                <div v-for="exp in expenses" :key="exp.id" class="app-card bg-white p-4 flex justify-between items-center shadow-sm">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-2xl bg-orange-50 flex items-center justify-center text-orange-500">
                            <i :data-lucide="getExpIcon(exp.category)" class="w-5 h-5"></i>
                        </div>
                        <div class="text-left">
                            <div class="text-sm font-bold text-slate-700">{{ exp.name }}</div>
                            <div class="flex gap-2 items-center mt-1">
                                <span class="expense-badge" :class="getExpColor(exp.category)">{{ exp.category }}</span>
                                <span class="text-[9px] text-slate-400">{{ exp.date }} · {{ exp.payMethod }}</span>
                            </div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-orange-600 font-bold italic">€ {{ exp.amount }}</div>
                        <div class="text-[9px] text-slate-400 italic">{{ exp.remarks }}</div>
                    </div>
                </div>
                <div v-if="expenses.length === 0" class="text-center py-10 text-slate-300 italic">尚未記錄任何開支</div>
            </div>
        </div>

    </main>

    <button @click="currentTab === 'expense' ? addNewExpense() : null" class="fixed bottom-8 right-8 w-16 h-16 bg-orange-500 text-white rounded-full shadow-2xl flex items-center justify-center z-50 border-4 border-white active:scale-90 transition-transform">
        <i data-lucide="plus" class="w-8 h-8"></i>
    </button>

</div>

<script>
    const { createApp, ref, computed, onMounted } = Vue;

    createApp({
        setup() {
            const currentTab = ref('itinerary');
            const selectedDate = ref('2026/02/07');
            const calcEuro = ref(100);

            const travelDates = [
                { weekday: 'Sat', dayNum: '07', date: '2026/02/07' },
                { weekday: 'Sun', dayNum: '08', date: '2026/02/08' },
                { weekday: 'Mon', dayNum: '09', date: '2026/02/09' },
                { weekday: 'Tue', dayNum: '10', date: '2026/02/10' },
                { weekday: 'Wed', dayNum: '11', date: '2026/02/11' },
                { weekday: 'Thu', dayNum: '12', date: '2026/02/12' },
                { weekday: 'Fri', dayNum: '13', date: '2026/02/13' },
                { weekday: 'Sat', dayNum: '14', date: '2026/02/14' },
                { weekday: 'Sun', dayNum: '15', date: '2026/02/15' },
                { weekday: 'Mon', dayNum: '16', date: '2026/02/16' },
                { weekday: 'Tue', dayNum: '17', date: '2026/02/17' }
            ];

            const cityDataMapping = {
                '2026/02/07': { city: 'Paris, FR', temp: '8', feel: '5', status: 'Cloudy', icon: 'cloud' },
                '2026/02/08': { city: 'Paris, FR', temp: '9', feel: '7', status: 'Sunny', icon: 'sun' },
                '2026/02/09': { city: 'Nice, FR', temp: '14', feel: '13', status: 'Cloudy', icon: 'cloud-sun' },
                '2026/02/10': { city: 'Nice, FR', temp: '15', feel: '14', status: 'Sunny', icon: 'sun' },
                '2026/02/11': { city: 'Nice, FR', temp: '13', feel: '12', status: 'Rainy', icon: 'cloud-rain' },
                '2026/02/12': { city: 'Lisbon, PT', temp: '17', feel: '16', status: 'Sunny', icon: 'sun' },
                '2026/02/13': { city: 'Lisbon, PT', temp: '18', feel: '17', status: 'Sunny', icon: 'sun' },
                '2026/02/14': { city: 'Lisbon, PT', temp: '16', feel: '15', status: 'Windy', icon: 'wind' },
                '2026/02/15': { city: 'Porto, PT', temp: '14', feel: '13', status: 'Cloudy', icon: 'cloud' },
                '2026/02/16': { city: 'Porto, PT', temp: '15', feel: '14', status: 'Sunny', icon: 'sun' },
                '2026/02/17': { city: 'Porto, PT', temp: '14', feel: '13', status: 'Rainy', icon: 'cloud-rain' }
            };

            const cityWeather = computed(() => cityDataMapping[selectedDate.value] || cityDataMapping['2026/02/07']);

            const allItinerary = ref([
                { id: 1, date: '2026/02/07', category: 'flight', name: '抵達 巴黎 CDG 機場', note: '辦理入境並搭乘接駁車' },
                { id: 2, date: '2026/02/07', category: 'stay', name: 'ibis Paris Gare de Lyon Diderot', note: '入住休息', transportMode: 'bus' },
                { id: 3, date: '2026/02/07', category: 'food', name: "La Maison d'Isabelle", note: '法式麵包店/可頌', transportMode: 'walking' },
                { id: 4, date: '2026/02/07', category: 'shopping', name: '樂蓬馬歇百貨公司', note: 'Le Bon Marché Rive Gauche', transportMode: 'bus' },
                { id: 5, date: '2026/02/07', category: 'food', name: 'Breizh Café', note: '甜點/可麗餅', transportMode: 'walking' },
                { id: 6, date: '2026/02/07', category: 'view', name: '巴黎聖母院', note: 'Notre Dame de Paris', transportMode: 'walking' },
                { id: 7, date: '2026/02/08', category: 'food', name: 'Jellycat Pâtisserie', note: '朝聖甜點店', transportMode: 'bus' },
                { id: 8, date: '2026/02/08', category: 'food', name: 'Bachir 冰淇淋', note: '知名黎巴嫩冰淇淋', transportMode: 'walking' },
                { id: 9, date: '2026/02/08', category: 'food', name: 'Papy aux Fourneaux', note: '法式晚餐', transportMode: 'bus' },
                { id: 10, date: '2026/02/09', category: 'flight', name: '巴黎 ➔ 尼斯', note: 'CDG ➔ NCE 機場', transportMode: 'plane' },
                { id: 11, date: '2026/02/09', category: 'stay', name: '5 Rue Gustave Deloye', note: '尼斯住宿 check-in', transportMode: 'car' },
                { id: 12, date: '2026/02/09', category: 'food', name: 'Maison Margaux', note: '南法風餐廳', transportMode: 'walking' },
                { id: 15, date: '2026/02/10', category: 'view', name: '城堡山公園 (Colline du Château)', note: '拍攝尼斯全貌' },
                { id: 19, date: '2026/02/11', category: 'view', name: '埃茲小鎮 (Èze Village)', note: '最美山城', transportMode: 'bus' },
                { id: 22, date: '2026/02/12', category: 'flight', name: '尼斯 ➔ 里斯本', note: 'NCE ➔ LIS 機場', transportMode: 'plane' },
                { id: 23, date: '2026/02/12', category: 'stay', name: 'The Visionaire Apartments', note: '入住里斯本', transportMode: 'car' },
                { id: 24, date: '2026/02/12', category: 'food', name: 'Fábrica da Nata', note: '經典蛋塔', transportMode: 'walking' },
                { id: 27, date: '2026/02/13', category: 'view', name: '聖若熱城堡', note: '里斯本全景', transportMode: 'bus' },
                { id: 31, date: '2026/02/13', category: 'food', name: 'Uma Marisqueira', note: '海鮮燉飯', transportMode: 'walking' },
                { id: 32, date: '2026/02/14', category: 'food', name: 'Casa Pastéis de Belém', note: '蛋塔創始店', transportMode: 'bus' },
                { id: 35, date: '2026/02/15', category: 'view', name: '里斯本 ➔ 波多', note: '抵達聖本圖車站', transportMode: 'train' },
                { id: 36, date: '2026/02/15', category: 'stay', name: 'Legends\' House', note: '波多住宿', transportMode: 'car' },
                { id: 40, date: '2026/02/16', category: 'view', name: '萊羅書店 (Livraria Lello)', note: '最美書店' },
                { id: 45, date: '2026/02/17', category: 'shopping', name: '波爾豪市場 (Bolhão)', note: '傳統市場', transportMode: 'bus' }
            ]);

            const staysInfo = [
                { loc: '巴黎', name: 'ibis Paris Gare de Lyon', date: '2/7 - 2/9' },
                { loc: '尼斯', name: '5 Rue Gustave Deloye', date: '2/9 - 2/12' },
                { loc: '里斯本', name: 'The Visionaire Apt', date: '2/12 - 2/15' },
                { loc: '波多', name: 'Legends\' House', date: '2/15 - 2/17' }
            ];

            // 花費資料
            const expenses = ref([
                { id: 1, category: '住宿', name: '尼斯公寓', date: '2026-02-09', amount: 450, payMethod: '信用卡', remarks: '三晚總計' },
                { id: 2, category: '交通', name: '里斯本火車', date: '2026-02-15', amount: 45, payMethod: '信用卡', remarks: '二等座' },
                { id: 3, category: '飲食', name: '蛋塔創始店', date: '2026-02-14', amount: 15, payMethod: '現金', remarks: '伴手禮盒' }
            ]);

            const totalExpenseAmount = computed(() => expenses.value.reduce((sum, item) => sum + item.amount, 0));

            const addNewExpense = () => {
                const name = prompt("輸入項目名稱:");
                if(!name) return;
                const amount = parseFloat(prompt("輸入金額 (EUR):") || 0);
                expenses.value.unshift({
                    id: Date.now(),
                    category: '其他',
                    name: name,
                    date: new Date().toISOString().split('T')[0],
                    amount: amount,
                    payMethod: '現金',
                    remarks: ''
                });
            };

            const getExpIcon = (cat) => ({ '交通': 'bus', '飲食': 'utensils', '住宿': 'home', '門票': 'ticket', '購物': 'shopping-bag' }[cat] || 'tag');
            const getExpColor = (cat) => ({ '交通': 'bg-blue-100 text-blue-600', '飲食': 'bg-green-100 text-green-600', '住宿': 'bg-purple-100 text-purple-600', '門票': 'bg-yellow-100 text-yellow-600', '購物': 'bg-pink-100 text-pink-600' }[cat] || 'bg-slate-100 text-slate-600');

            const filteredItinerary = computed(() => allItinerary.value.filter(item => item.date === selectedDate.value));
            const getIcon = (cat) => ({ flight: 'plane', stay: 'home', food: 'utensils', view: 'camera', shopping: 'shopping-bag' }[cat] || 'map-pin');
            const tabStyle = (tab) => `w-12 h-12 rounded-2xl flex items-center justify-center transition-all ${currentTab.value === tab ? 'bg-orange-500 text-white scale-110 shadow-lg shadow-orange-200' : 'glass-tab text-orange-500'}`;
            const openMap = (q) => window.open(`https://www.google.com/maps/search/${encodeURIComponent(q)}`, '_blank');

            onMounted(() => {
                lucide.createIcons();
                setInterval(() => lucide.createIcons(), 600);
            });

            return { currentTab, selectedDate, travelDates, filteredItinerary, getIcon, tabStyle, calcEuro, openMap, cityWeather, staysInfo, expenses, totalExpenseAmount, addNewExpense, getExpIcon, getExpColor };
        }
    }).mount('#app');
</script>

</body>
</html>
