<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Y2026 CDG 肯恰那 叮叮叮</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Playfair+Display:wght@700&display=swap');
        
        :root {
            --warm-terracotta: #E2725B;
            --bg-sand: #FAF7F2;
            --gold-yellow: #FACC15;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg-sand);
            color: #4A4A4A;
            /* 防止行動端亂跳 */
            overflow-x: hidden;
            overscroll-behavior-y: none;
            -webkit-overflow-scrolling: touch;
        }

        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .content-overlap {
            margin-top: -40px;
            border-top-left-radius: 35px;
            border-top-right-radius: 35px;
            background-color: var(--bg-sand);
            position: relative;
            z-index: 20;
            min-height: calc(100vh - 210px);
        }

        .app-card {
            border-radius: 24px;
            box-shadow: 0 6px 15px -3px rgba(226, 114, 91, 0.12);
            transition: transform 0.2s;
        }

        /* 選中日期：金色 */
        .date-item-active {
            background-color: var(--gold-yellow) !important;
            color: #1e293b !important;
            transform: scale(1.08);
            box-shadow: 0 8px 20px rgba(250, 204, 21, 0.4);
        }

        .glass-tab {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(226, 114, 91, 0.15);
        }

        .title-font { font-family: 'Playfair Display', serif; }

        /* 防止點選時畫面閃爍 */
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body>

<div id="app" class="max-w-md mx-auto min-h-screen pb-24 relative shadow-2xl bg-[#FAF7F2]">
    
    <header class="relative w-full h-[250px] overflow-hidden">
        <img src="https://images.unsplash.com/photo-1555881400-74d7acaacd8b?q=80&w=1920&auto=format&fit=crop" 
             alt="Porto Banner" class="w-full h-full object-cover">
        
        <nav class="absolute bottom-12 right-4 flex gap-2 z-30">
            <button v-for="t in tabs" :key="t.id" @click="currentTab = t.id" :class="tabStyle(t.id)">
                <i :data-lucide="t.icon" class="w-5 h-5"></i>
            </button>
        </nav>

        <div class="absolute top-10 left-6 text-white drop-shadow-xl">
            <h1 class="title-font text-2xl tracking-tighter">Y2026 CDG</h1>
            <p class="text-sm font-bold tracking-widest bg-orange-500/80 px-2 py-0.5 rounded italic">肯恰那 叮叮叮</p>
        </div>
    </header>

    <main class="content-overlap p-5 shadow-inner">
        
        <div v-show="currentTab === 'itinerary'">
            <div class="app-card bg-white p-4 mb-6 flex justify-between items-center border-b-4 border-yellow-400">
                <div class="flex items-center gap-3">
                    <div class="p-2 bg-yellow-50 rounded-full">
                        <i :data-lucide="cityWeather.icon" class="w-8 h-8 text-yellow-600"></i>
                    </div>
                    <div>
                        <div class="text-[10px] text-orange-400 font-bold uppercase">Current City Info</div>
                        <div class="text-xl font-bold text-slate-700">{{ cityWeather.temp }}°C <span class="text-sm font-normal text-slate-400">{{ cityWeather.status }}</span></div>
                    </div>
                </div>
                <div class="text-right">
                    <div class="text-xs font-bold text-slate-500">{{ cityWeather.city }}</div>
                    <div class="text-[10px] text-slate-400 italic">2026 Feb Update</div>
                </div>
            </div>

            <div class="flex overflow-x-auto no-scrollbar gap-3 mb-6 py-2 px-1 snap-x">
                <div v-for="day in travelDates" :key="day.date" 
                     @click="selectedDate = day.date"
                     class="flex-shrink-0 w-14 py-3 rounded-2xl flex flex-col items-center transition-all duration-300 bg-white text-slate-400 shadow-sm snap-center"
                     :class="{'date-item-active': selectedDate === day.date}">
                    <span class="text-[10px] font-bold">{{ day.weekday }}</span>
                    <span class="text-lg font-bold">{{ day.dayNum }}</span>
                </div>
            </div>

            <div class="space-y-4">
                <div v-for="(item, index) in filteredItinerary" :key="item.id">
                    <div v-if="item.isTransport" class="flex items-center gap-3 ml-12 my-2 py-1">
                        <div class="w-0.5 h-8 border-l-2 border-dotted border-orange-300"></div>
                        <div class="flex items-center gap-2 text-[11px] font-bold text-orange-400 bg-orange-50 px-3 py-1 rounded-full">
                            <i data-lucide="clock" class="w-3 h-3"></i>
                            移動 {{ item.time }}
                        </div>
                    </div>

                    <div v-else :class="['app-card p-4 relative bg-white border border-orange-100 shadow-sm', item.isFlight ? 'bg-orange-500 text-white' : '']">
                        <div class="flex gap-4">
                            <div :class="['p-3 rounded-2xl', item.isFlight ? 'bg-orange-400' : 'bg-orange-50 text-orange-500']">
                                <i :data-lucide="getIcon(item.category)" class="w-6 h-6"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <span class="text-[10px] opacity-60 font-bold block">{{ item.startTime }}</span>
                                        <h3 class="font-bold text-md leading-tight">{{ item.name }}</h3>
                                    </div>
                                    <button @click="openMap(item.name)" :class="item.isFlight ? 'text-white' : 'text-blue-500'">
                                        <i data-lucide="navigation" class="w-5 h-5"></i>
                                    </button>
                                </div>
                                <div v-if="item.duration" class="mt-2 text-[11px] flex items-center gap-1 opacity-70">
                                    <i data-lucide="timer" class="w-3 h-3"></i> 停留 {{ item.duration }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-show="currentTab === 'info'" class="space-y-6">
            <div class="app-card bg-white p-5 border-l-4 border-blue-400">
                <div class="text-sm font-bold text-blue-600 mb-2">匯率換算 (EUR ➔ TWD)</div>
                <div class="flex items-center gap-2">
                    <input type="number" v-model="euroInput" class="w-20 p-2 bg-slate-100 rounded-lg text-lg font-bold">
                    <span>➔</span>
                    <div class="text-xl font-bold text-slate-800">{{ (euroInput * 35.8).toFixed(0) }} 元</div>
                </div>
            </div>
            <div class="app-card bg-white p-5 border-l-4 border-orange-400 space-y-3">
                <div class="text-sm font-bold text-orange-600 mb-2">住宿快速導航</div>
                <div v-for="s in stays" class="flex justify-between items-center text-xs border-b pb-2">
                    <div>
                        <div class="font-bold text-slate-700">{{ s.name }}</div>
                        <div class="text-slate-400">{{ s.date }}</div>
                    </div>
                    <button @click="openMap(s.name)" class="text-orange-500 p-2"><i data-lucide="map-pin"></i></button>
                </div>
            </div>
        </div>

        <div v-show="currentTab === 'shopping'" class="grid grid-cols-2 gap-4">
            <div class="app-card bg-white h-40 flex flex-col items-center justify-center text-slate-300 border-2 border-dashed border-slate-100">
                <i data-lucide="plus" class="w-8 h-8"></i>
                <span class="text-[10px] mt-2">點擊新增商品</span>
            </div>
        </div>

        <div v-show="currentTab === 'expense'" class="space-y-4">
            <div class="app-card bg-slate-800 p-6 text-white text-center">
                <div class="text-xs opacity-50 uppercase tracking-widest mb-1">Total Expenses</div>
                <div class="text-3xl font-bold text-yellow-400">¥ {{ totalExpense }}</div>
                <div class="text-[10px] mt-2 opacity-40">資料已儲存於本地裝置</div>
            </div>
            
            <div class="space-y-3">
                <div v-for="(e, idx) in expenseList" :key="idx" class="app-card bg-white p-4 flex justify-between items-center">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-slate-500">
                            <i :data-lucide="e.category === 'food' ? 'utensils' : 'shopping-bag'" class="w-4 h-4"></i>
                        </div>
                        <div>
                            <div class="text-sm font-bold">{{ e.name }}</div>
                            <div class="text-[10px] text-slate-400">{{ e.date }} · {{ e.pay }}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-bold text-orange-600">¥ {{ e.amount }}</div>
                        <button @click="removeExpense(idx)" class="text-[10px] text-slate-300">刪除</button>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <button @click="addExpenseDemo" class="fixed bottom-8 right-8 w-16 h-16 bg-orange-500 text-white rounded-full shadow-2xl flex items-center justify-center z-50 border-4 border-white active:scale-95">
        <i data-lucide="plus" class="w-8 h-8"></i>
    </button>

</div>

<script>
    const { createApp, ref, computed, onMounted, watch } = Vue;

    createApp({
        setup() {
            const currentTab = ref('itinerary');
            const selectedDate = ref('2026/02/07');
            const euroInput = ref(100);
            
            const tabs = [
                { id: 'itinerary', icon: 'map' },
                { id: 'info', icon: 'info' },
                { id: 'shopping', icon: 'shopping-cart' },
                { id: 'expense', icon: 'coins' }
            ];

            const travelDates = [
                { weekday: 'Sat', dayNum: '07', date: '2026/02/07' },
                { weekday: 'Sun', dayNum: '08', date: '2026/02/08' },
                { weekday: 'Mon', dayNum: '09', date: '2026/02/09' },
                { weekday: 'Tue', dayNum: '10', date: '2026/02/10' },
                { weekday: 'Wed', dayNum: '11', date: '2026/02/11' },
                { weekday: 'Thu', dayNum: '12', date: '2026/02/12' },
                { weekday: 'Fri', dayNum: '13', date: '2026/02/13' },
                { weekday: 'Sat', dayNum: '14', date: '2026/02/14' },
                { weekday: 'Sun', dayNum: '15', date: '2026/02/15' },
                { weekday: 'Mon', dayNum: '16', date: '2026/02/16' },
                { weekday: 'Tue', dayNum: '17', date: '2026/02/17' }
            ];

            const cityDataMapping = {
                '2026/02/07': { city: 'Paris, FR', temp: '8', status: 'Cloudy', icon: 'cloud' },
                '2026/02/08': { city: 'Nice, FR', temp: '14', status: 'Windy', icon: 'wind' },
                '2026/02/09': { city: 'Nice, FR', temp: '15', status: 'Sunny', icon: 'sun' },
                '2026/02/10': { city: 'Monaco', temp: '14', status: 'Sunny', icon: 'sun' },
                '2026/02/11': { city: 'Lisbon, PT', temp: '17', status: 'Sunny', icon: 'sun' },
                '2026/02/14': { city: 'Porto, PT', temp: '15', status: 'Rainy', icon: 'cloud-rain' }
            };

            const cityWeather = computed(() => cityDataMapping[selectedDate.value] || { city: 'Portugal', temp: '16', status: 'Sunny', icon: 'sun' });

            const allItinerary = ref([
                // Day 1: 巴黎
                { id: 101, date: '2026/02/07', category: 'stay', startTime: '14:00', name: 'ibis Paris Gare de Lyon Diderot (入住)', duration: 'Check-in' },
                { id: 102, date: '2026/02/07', isTransport: true, time: '22分' },
                { id: 103, date: '2026/02/07', category: 'food', startTime: '15:30', name: "La Maison d'Isabelle", duration: '30分' },
                { id: 104, date: '2026/02/07', isTransport: true, time: '25分' },
                { id: 105, date: '2026/02/07', category: 'shopping', startTime: '16:30', name: '樂蓬馬歇百貨公司 Le Bon Marché', duration: '120分' },
                { id: 106, date: '2026/02/07', isTransport: true, time: '20分' },
                { id: 107, date: '2026/02/07', category: 'food', startTime: '18:30', name: 'Breizh Café', duration: '90分' },
                { id: 108, date: '2026/02/07', isTransport: true, time: '15分' },
                { id: 109, date: '2026/02/07', category: 'view', startTime: '20:30', name: '巴黎聖母院 Notre Dame de Paris', duration: '60分' },

                // Day 2: 巴黎 ➔ 尼斯
                { id: 201, date: '2026/02/08', category: 'food', startTime: '09:30', name: 'Jellycat Pâtisserie', duration: '60分' },
                { id: 202, date: '2026/02/08', isTransport: true, time: '20分' },
                { id: 203, date: '2026/02/08', category: 'food', startTime: '11:00', name: 'Bachir 冰淇淋', duration: '60分' },
                { id: 204, date: '2026/02/08', isTransport: true, time: '15分' },
                { id: 205, date: '2026/02/08', category: 'food', startTime: '12:30', name: 'Papy aux Fourneaux (午餐)', duration: '90分' },
                { id: 206, date: '2026/02/08', isTransport: true, time: '60分' },
                { id: 207, date: '2026/02/08', category: 'flight', isFlight: true, startTime: '15:00', name: '巴黎夏爾·戴高樂機場 (搭機)', duration: '航班: 15:00-16:35' },
                { id: 208, date: '2026/02/08', category: 'flight', isFlight: true, startTime: '17:30', name: '尼斯藍色海岸機場 (抵達)', duration: '已入境' },
                { id: 209, date: '2026/02/08', isTransport: true, time: '30分' },
                { id: 210, date: '2026/02/08', category: 'stay', startTime: '18:30', name: '5 Rue Gustave Deloye (入住)', duration: '住宿中' },
                { id: 211, date: '2026/02/08', isTransport: true, time: '10分' },
                { id: 212, date: '2026/02/08', category: 'food', startTime: '19:30', name: 'Maison Margaux (晚餐)', duration: '90分' },

                // Day 3: 尼斯
                { id: 301, date: '2026/02/09', category: 'view', startTime: '09:00', name: '太陽噴泉', duration: '30分' },
                { id: 302, date: '2026/02/09', isTransport: true, time: '5分' },
                { id: 303, date: '2026/02/09', category: 'view', startTime: '10:00', name: 'Place Masséna', duration: '60分' },
                { id: 304, date: '2026/02/09', isTransport: true, time: '15分' },
                { id: 305, date: '2026/02/09', category: 'food', startTime: '12:00', name: 'Gusti Restaurant', duration: '90分' },
                { id: 306, date: '2026/02/09', isTransport: true, time: '20分' },
                { id: 307, date: '2026/02/09', category: 'view', startTime: '14:00', name: '城堡山公園', duration: '90分' },
                { id: 308, date: '2026/02/09', isTransport: true, time: '15分' },
                { id: 309, date: '2026/02/09', category: 'shopping', startTime: '16:00', name: '賽雷亞花果市集', duration: '60分' },
                { id: 310, date: '2026/02/09', isTransport: true, time: '10分' },
                { id: 311, date: '2026/02/09', category: 'food', startTime: '18:00', name: 'Peixes (晚餐)', duration: '90分' },

                // Day 4: 埃茲 & 摩納哥
                { id: 401, date: '2026/02/10', category: 'view', startTime: '09:00', name: '尼斯主教座堂', duration: '45分' },
                { id: 402, date: '2026/02/10', isTransport: true, time: '10分' },
                { id: 403, date: '2026/02/10', category: 'view', startTime: '10:00', name: '尼斯老城', duration: '90分' },
                { id: 404, date: '2026/02/10', isTransport: true, time: '40分' },
                { id: 405, date: '2026/02/10', category: 'view', startTime: '13:00', name: 'Èze Village (埃茲山城)', duration: '60分' },
                { id: 406, date: '2026/02/10', isTransport: true, time: '5分' },
                { id: 407, date: '2026/02/10', category: 'view', startTime: '14:30', name: 'Jardin Exotique d’Èze', duration: '60分' },
                { id: 408, date: '2026/02/10', isTransport: true, time: '30分' },
                { id: 409, date: '2026/02/10', category: 'view', startTime: '16:30', name: 'Le Monaco Palace (摩納哥親王宮)', duration: '90分' },

                // Day 5: 尼斯 ➔ 里斯本
                { id: 501, date: '2026/02/11', category: 'flight', isFlight: true, startTime: '08:00', name: '尼斯藍色海岸機場 (搭機)', duration: '航班: 09:40-11:20' },
                { id: 502, date: '2026/02/11', category: 'flight', isFlight: true, startTime: '11:30', name: '里斯本機場 (抵達)', duration: '入境里斯本' },
                { id: 503, date: '2026/02/11', isTransport: true, time: '30分' },
                { id: 504, date: '2026/02/11', category: 'stay', startTime: '12:30', name: 'The Visionaire Apartments (入住)', duration: '住宿中' },
                { id: 505, date: '2026/02/11', isTransport: true, time: '10分' },
                { id: 506, date: '2026/02/11', category: 'food', startTime: '13:30', name: 'Fábrica da Nata (蛋塔)', duration: '45分' },
                { id: 507, date: '2026/02/11', isTransport: true, time: '15分' },
                { id: 508, date: '2026/02/11', category: 'view', startTime: '15:00', name: '奧古斯塔街拱門', duration: '60分' },
                { id: 509, date: '2026/02/11', isTransport: true, time: '10分' },
                { id: 510, date: '2026/02/11', category: 'food', startTime: '17:00', name: 'Nova Wine Bar', duration: '90分' },
                { id: 511, date: '2026/02/11', isTransport: true, time: '10分' },
                { id: 512, date: '2026/02/11', category: 'view', startTime: '19:00', name: '聖胡斯塔升降機', duration: '60分' },

                // Day 6: 里斯本舊城
                { id: 601, date: '2026/02/12', category: 'view', startTime: '09:30', name: '聖若熱城堡', duration: '120分' },
                { id: 602, date: '2026/02/12', isTransport: true, time: '15分' },
                { id: 603, date: '2026/02/12', category: 'food', startTime: '11:30', name: 'Café da Garagem', duration: '60分' },
                { id: 604, date: '2026/02/12', isTransport: true, time: '10分' },
                { id: 605, date: '2026/02/12', category: 'view', startTime: '13:30', name: '恩寵觀景台', duration: '60分' },
                { id: 606, date: '2026/02/12', isTransport: true, time: '20分' },
                { id: 607, date: '2026/02/12', category: 'food', startTime: '15:30', name: 'Moona Chicken', duration: '60分' },
                { id: 608, date: '2026/02/12', isTransport: true, time: '30分' },
                { id: 609, date: '2026/02/12', category: 'food', startTime: '18:30', name: 'Uma Marisqueira (海鮮燉飯)', duration: '90分' },

                // Day 7: 貝倫區
                { id: 701, date: '2026/02/13', category: 'food', startTime: '09:00', name: 'Casa Pastéis de Belém', duration: '60分' },
                { id: 702, date: '2026/02/13', isTransport: true, time: '5分' },
                { id: 703, date: '2026/02/13', category: 'view', startTime: '10:30', name: 'Church of Saint Mary of Bethlehem', duration: '45分' },
                { id: 704, date: '2026/02/13', isTransport: true, time: '5分' },
                { id: 705, date: '2026/02/13', category: 'view', startTime: '11:30', name: '熱羅尼莫斯修道院', duration: '90分' },
                { id: 706, date: '2026/02/13', isTransport: true, time: '15分' },
                { id: 707, date: '2026/02/13', category: 'view', startTime: '13:30', name: '發現者紀念碑', duration: '60分' },
                { id: 708, date: '2026/02/13', isTransport: true, time: '15分' },
                { id: 709, date: '2026/02/13', category: 'view', startTime: '15:00', name: '貝倫塔', duration: '90分' },

                // Day 8: 里斯本 ➔ 波多
                { id: 801, date: '2026/02/14', category: 'flight', startTime: '09:00', name: '搭乘火車前往波多', duration: '約 3 小時' },
                { id: 802, date: '2026/02/14', category: 'view', startTime: '12:30', name: 'Porto São Bento (聖本圖車站)', duration: '抵達' },
                { id: 803, date: '2026/02/14', isTransport: true, time: '10分' },
                { id: 804, date: '2026/02/14', category: 'view', startTime: '14:00', name: '波爾圖主教座堂', duration: '60分' },
                { id: 805, date: '2026/02/14', isTransport: true, time: '15分' },
                { id: 806, date: '2026/02/14', category: 'view', startTime: '15:30', name: 'Miradouro da Vitória', duration: '45分' },
                { id: 807, date: '2026/02/14', isTransport: true, time: '10分' },
                { id: 808, date: '2026/02/14', category: 'view', startTime: '17:00', name: 'Ribeira do Porto (利貝拉區)', duration: '90分' },
                { id: 809, date: '2026/02/14', isTransport: true, time: '10分' },
                { id: 810, date: '2026/02/14', category: 'food', startTime: '19:00', name: 'Taberna Dos Mercadores', duration: '120分' },

                // Day 9: 波多經典
                { id: 901, date: '2026/02/15', category: 'view', startTime: '09:00', name: '萊羅書店', duration: '90分' },
                { id: 902, date: '2026/02/15', isTransport: true, time: '10分' },
                { id: 903, date: '2026/02/15', category: 'view', startTime: '11:00', name: 'Torre dos Clérigos', duration: '60分' },
                { id: 904, date: '2026/02/15', isTransport: true, time: '10分' },
                { id: 905, date: '2026/02/15', category: 'view', startTime: '13:00', name: '卡爾莫教堂', duration: '45分' },
                { id: 906, date: '2026/02/15', isTransport: true, time: '10分' },
                { id: 907, date: '2026/02/15', category: 'food', startTime: '14:30', name: 'Conga (豬扒包)', duration: '60分' },
                { id: 908, date: '2026/02/15', isTransport: true, time: '20分' },
                { id: 909, date: '2026/02/15', category: 'view', startTime: '16:30', name: '路易一世大橋', duration: '60分' },
                { id: 910, date: '2026/02/15', isTransport: true, time: '10分' },
                { id: 911, date: '2026/02/15', category: 'food', startTime: '18:00', name: 'Sandeman (酒莊)', duration: '90分' },
                { id: 912, date: '2026/02/15', isTransport: true, time: '10分' },
                { id: 913, date: '2026/02/15', category: 'view', startTime: '19:30', name: 'Jardim do Morro (夕陽)', duration: '60分' },

                // Day 10: 波多生活
                { id: 1001, date: '2026/02/16', category: 'shopping', startTime: '09:30', name: 'Mercado do Bolhão (市場)', duration: '90分' },
                { id: 1002, date: '2026/02/16', isTransport: true, time: '5分' },
                { id: 1003, date: '2026/02/16', category: 'shopping', startTime: '11:30', name: 'R. de Santa Catarina (購物街)', duration: '120分' },
                { id: 1004, date: '2026/02/16', isTransport: true, time: '10分' },
                { id: 1005, date: '2026/02/16', category: 'food', startTime: '13:30', name: 'Cachorrinho Gazela', duration: '60分' },
                { id: 1006, date: '2026/02/16', isTransport: true, time: '20分' },
                { id: 1007, date: '2026/02/16', category: 'shopping', startTime: '15:30', name: 'Pingo Doce (超市)', duration: '60分' },
                { id: 1008, date: '2026/02/16', isTransport: true, time: '30分' },
                { id: 1009, date: '2026/02/16', category: 'food', startTime: '18:30', name: 'Brasão Aliados', duration: '90分' }
            ]);

            const expenseList = ref(JSON.parse(localStorage.getItem('expenses') || '[]'));
            const totalExpense = computed(() => expenseList.value.reduce((s, e) => s + Number(e.amount), 0));

            const removeExpense = (i) => { expenseList.value.splice(i, 1); };

            watch(expenseList, (newVal) => {
                localStorage.setItem('expenses', JSON.stringify(newVal));
            }, { deep: true });

            const addExpenseDemo = () => {
                const name = prompt('花費名稱：', '美食午餐');
                const amount = prompt('金額 (日幣)：', '2500');
                if (name && amount) {
                    expenseList.value.push({
                        name, amount, category: 'food', pay: '信用卡', date: new Date().toLocaleDateString()
                    });
                }
            };

            const filteredItinerary = computed(() => allItinerary.value.filter(i => i.date === selectedDate.value));
            const getIcon = (cat) => ({ flight: 'plane', stay: 'home', food: 'utensils', view: 'camera', shopping: 'shopping-bag' }[cat] || 'map-pin');
            const tabStyle = (id) => `p-3 rounded-2xl transition-all ${currentTab.ref === id ? 'bg-orange-500 text-white' : 'glass-tab text-orange-500'}`;
            const openMap = (q) => window.open(`https://www.google.com/maps/search/${encodeURIComponent(q)}`, '_blank');

            onMounted(() => { lucide.createIcons(); setInterval(() => lucide.createIcons(), 800); });

            return {
                currentTab, selectedDate, travelDates, filteredItinerary, getIcon, 
                cityWeather, openMap, euroInput, expenseList, totalExpense, removeExpense, addExpenseDemo,
                tabs,
                stays: [
                    { name: 'ibis Paris Gare de Lyon', date: '2/7-2/8' },
                    { name: '5 Rue Gustave Deloye (Nice)', date: '2/8-2/11' },
                    { name: 'The Visionaire Apartments (Lisbon)', date: '2/11-2/14' },
                    { name: 'Legends\' House (Porto)', date: '2/14-2/17' }
                ],
                tabStyle: (id) => `w-12 h-12 rounded-2xl flex items-center justify-center transition-all ${currentTab.value === id ? 'bg-orange-500 text-white shadow-lg' : 'glass-tab text-orange-500'}`
            };
        }
    }).mount('#app');
</script>

</body>
</html>
