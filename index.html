<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Y2026 CDG 肯恰那 叮叮叮</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Playfair+Display:wght@700&display=swap');
        :root {
            --warm-terracotta: #E2725B;
            --bg-sand: #FAF7F2;
            --gold-yellow: #FACC15;
        }
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg-sand);
            color: #4A4A4A;
            overflow-x: hidden;
            overscroll-behavior-y: none; /* 防止手機下拉重新整理干擾 */
            -webkit-overflow-scrolling: touch;
        }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .content-overlap {
            margin-top: -40px;
            border-top-left-radius: 35px;
            border-top-right-radius: 35px;
            background-color: var(--bg-sand);
            position: relative;
            z-index: 20;
            min-height: 80vh;
        }
        .app-card {
            border-radius: 20px;
            transition: all 0.2s ease;
        }
        /* 金黃色日期選單 */
        .date-item-active {
            background-color: var(--gold-yellow) !important;
            color: #1e293b !important;
            transform: scale(1.1);
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(250, 204, 21, 0.5);
        }
        .flight-card {
            background-color: #E2725B !important; /* 暖橘色背景 */
            color: #FFFFFF !important;
        }
        .flight-card * { color: #FFFFFF !important; }
        
        .glass-tab {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(226, 114, 91, 0.1);
        }
        .title-font { font-family: 'Playfair Display', serif; }
        * { -webkit-tap-highlight-color: transparent; }
    </style>
</head>
<body>

<div id="app" class="max-w-md mx-auto min-h-screen pb-24 relative shadow-2xl bg-[#FAF7F2]">
    
    <header class="relative w-full h-[250px] overflow-hidden">
        <img src="https://images.unsplash.com/photo-1555881400-74d7acaacd8b?q=80&w=1920&auto=format&fit=crop" 
             alt="Porto" class="w-full h-full object-cover">
        
        <nav class="absolute bottom-12 right-4 flex gap-2 z-30">
            <button v-for="t in tabs" :key="t.id" @click="currentTab = t.id" :class="tabStyle(t.id)">
                <i :data-lucide="t.icon" class="w-5 h-5"></i>
            </button>
        </nav>

        <div class="absolute top-10 left-6 text-white drop-shadow-lg">
            <h1 class="title-font text-2xl">Y2026 CDG</h1>
            <p class="text-sm font-bold tracking-widest italic opacity-90">肯恰那 叮叮叮</p>
        </div>
    </header>

    <main class="content-overlap p-5">
        
        <div v-show="currentTab === 'itinerary'">
            
            <div class="flex overflow-x-auto no-scrollbar gap-3 mb-6 py-2 px-1 snap-x">
                <div v-for="day in travelDates" :key="day.date" 
                     @click="selectedDate = day.date"
                     class="flex-shrink-0 w-14 py-3 rounded-2xl flex flex-col items-center transition-all bg-white text-slate-400 shadow-sm snap-center"
                     :class="{'date-item-active': selectedDate === day.date}">
                    <span class="text-[10px]">{{ day.weekday }}</span>
                    <span class="text-lg">{{ day.dayNum }}</span>
                </div>
            </div>

            <div class="space-y-4">
                <div v-for="(item, index) in filteredItinerary" :key="index">
                    
                    <div v-if="item.type === 'move'" class="flex items-center gap-3 ml-12 my-2">
                        <div class="w-0.5 h-6 border-l-2 border-dotted border-orange-300"></div>
                        <div class="text-[11px] font-bold text-orange-400 bg-orange-50 px-2 py-0.5 rounded flex items-center gap-1">
                            <i data-lucide="move-right" class="w-3 h-3"></i> 移動 {{ item.time }}
                        </div>
                    </div>

                    <div v-else :class="['app-card p-4 shadow-sm border border-orange-50', item.isFlight ? 'flight-card' : 'bg-white']">
                        <div class="flex gap-4">
                            <div :class="['p-3 rounded-2xl', item.isFlight ? 'bg-white/20' : 'bg-orange-50 text-orange-500']">
                                <i :data-lucide="getIcon(item.category)" class="w-6 h-6"></i>
                            </div>
                            <div class="flex-1">
                                <div class="flex justify-between items-start">
                                    <div>
                                        <span class="text-[10px] opacity-60 block font-bold">{{ item.time }}</span>
                                        <h3 class="font-bold text-[15px] leading-tight">{{ item.name }}</h3>
                                    </div>
                                    <button @click="openMap(item.name)" :class="item.isFlight ? 'text-white' : 'text-blue-500'">
                                        <i data-lucide="navigation" class="w-5 h-5"></i>
                                    </button>
                                </div>
                                <div v-if="item.stay" class="mt-2 text-[11px] flex items-center gap-1 opacity-80">
                                    <i data-lucide="clock-3" class="w-3 h-3"></i> 停留 {{ item.stay }}
                                </div>
                                <div v-if="item.note" class="mt-1 text-[10px] opacity-60 italic">{{ item.note }}</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div v-show="currentTab === 'expense'" class="space-y-4">
            <div class="app-card bg-slate-800 p-6 text-white">
                <div class="text-[10px] opacity-50 tracking-widest uppercase mb-1">Total Spent</div>
                <div class="text-3xl font-bold text-yellow-400 title-font">¥ {{ totalExpense.toLocaleString() }}</div>
            </div>
            
            <div class="flex flex-col gap-3">
                <div v-for="(e, idx) in expenseList" :key="idx" class="app-card bg-white p-4 flex justify-between items-center shadow-sm">
                    <div class="flex items-center gap-3">
                        <div class="bg-orange-50 p-2 rounded-lg text-orange-500"><i data-lucide="receipt" class="w-4 h-4"></i></div>
                        <div>
                            <div class="text-sm font-bold text-slate-700">{{ e.name }}</div>
                            <div class="text-[10px] text-slate-400">{{ e.date }} · {{ e.pay }}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="text-sm font-bold text-orange-600">¥ {{ e.amount }}</div>
                        <button @click="removeExpense(idx)" class="text-[10px] text-red-300">刪除</button>
                    </div>
                </div>
                <div v-if="expenseList.length === 0" class="text-center py-10 text-slate-300 italic">尚未有消費記錄</div>
            </div>
        </div>

        <div v-show="currentTab === 'info'" class="space-y-4">
            <div class="app-card bg-white p-5 shadow-sm border-l-4 border-blue-400">
                <div class="text-xs font-bold text-blue-500 mb-3">匯率換算 (當前匯率 1:35.8)</div>
                <div class="flex items-center gap-3">
                    <input type="number" v-model="euroInput" class="w-full p-2 bg-slate-50 rounded-lg outline-none font-bold">
                    <span class="text-slate-300">EUR =</span>
                    <div class="w-full p-2 bg-blue-50 text-blue-600 font-bold rounded-lg tracking-wider">{{ (euroInput * 35.8).toFixed(0) }} TWD</div>
                </div>
            </div>
            <div class="app-card bg-white p-5 shadow-sm space-y-4">
                <div class="text-xs font-bold text-orange-500">住宿資訊概覽</div>
                <div v-for="s in stays" class="text-[11px] border-b border-slate-50 pb-2 last:border-0">
                    <div class="font-bold text-slate-700">{{ s.place }}</div>
                    <div class="text-slate-400">{{ s.date }}</div>
                </div>
            </div>
        </div>

    </main>

    <button @click="openAddExpense" class="fixed bottom-8 right-8 w-16 h-16 bg-orange-500 text-white rounded-full shadow-2xl flex items-center justify-center z-50 border-4 border-white active:scale-95">
        <i data-lucide="plus" class="w-8 h-8"></i>
    </button>

</div>

<script>
    const { createApp, ref, computed, onMounted, watch } = Vue;

    createApp({
        setup() {
            const currentTab = ref('itinerary');
            const selectedDate = ref('2026/02/07');
            const euroInput = ref(100);
            const expenseList = ref(JSON.parse(localStorage.getItem('trip_expenses_v2') || '[]'));

            const tabs = [
                { id: 'itinerary', icon: 'map' },
                { id: 'info', icon: 'info' },
                { id: 'expense', icon: 'coins' }
            ];

            const travelDates = [
                { weekday: 'Sat', dayNum: '07', date: '2026/02/07' },
                { weekday: 'Sun', dayNum: '08', date: '2026/02/08' },
                { weekday: 'Mon', dayNum: '09', date: '2026/02/09' },
                { weekday: 'Tue', dayNum: '10', date: '2026/02/10' },
                { weekday: 'Wed', dayNum: '11', date: '2026/02/11' },
                { weekday: 'Thu', dayNum: '12', date: '2026/02/12' },
                { weekday: 'Fri', dayNum: '13', date: '2026/02/13' },
                { weekday: 'Sat', dayNum: '14', date: '2026/02/14' },
                { weekday: 'Sun', dayNum: '15', date: '2026/02/15' },
                { weekday: 'Mon', dayNum: '16', date: '2026/02/16' },
                { weekday: 'Tue', dayNum: '17', date: '2026/02/17' }
            ];

            // 完整 68 點位行程資料 (含移動停留)
            const allPoints = [
                // Day 1
                { date: '2026/02/07', type: 'point', time: '14:00', name: 'ibis Paris Gare de Lyon (入住)', stay: 'Check-in', category: 'stay' },
                { date: '2026/02/07', type: 'move', time: '22分' },
                { date: '2026/02/07', type: 'point', time: '15:30', name: "La Maison d'Isabelle", stay: '30分', category: 'food' },
                { date: '2026/02/07', type: 'move', time: '25分' },
                { date: '2026/02/07', type: 'point', time: '16:30', name: '樂蓬馬歇百貨公司 Le Bon Marché', stay: '120分', category: 'shopping' },
                { date: '2026/02/07', type: 'move', time: '20分' },
                { date: '2026/02/07', type: 'point', time: '18:30', name: 'Breizh Café', stay: '90分', category: 'food' },
                { date: '2026/02/07', type: 'move', time: '15分' },
                { date: '2026/02/07', type: 'point', time: '20:30', name: '巴黎聖母院 Notre Dame de Paris', stay: '60分', category: 'view' },
                // Day 2
                { date: '2026/02/08', type: 'point', time: '09:30', name: 'Jellycat Pâtisserie', stay: '60分', category: 'food' },
                { date: '2026/02/08', type: 'move', time: '20分' },
                { date: '2026/02/08', type: 'point', time: '11:00', name: 'Bachir 冰淇淋', stay: '60分', category: 'food' },
                { date: '2026/02/08', type: 'move', time: '15分' },
                { date: '2026/02/08', type: 'point', time: '12:30', name: 'Papy aux Fourneaux (午餐)', stay: '90分', category: 'food' },
                { date: '2026/02/08', type: 'move', time: '60分' },
                { date: '2026/02/08', type: 'point', time: '15:00', name: '巴黎夏爾·戴高樂機場 (搭機)', isFlight: true, category: 'flight', note: '航班 15:00-16:35' },
                { date: '2026/02/08', type: 'point', time: '17:30', name: '尼斯藍色海岸機場 (抵達)', isFlight: true, category: 'flight' },
                { date: '2026/02/08', type: 'move', time: '30分' },
                { date: '2026/02/08', type: 'point', time: '18:30', name: '5 Rue Gustave Deloye (入住尼斯)', stay: 'Stay', category: 'stay' },
                { date: '2026/02/08', type: 'move', time: '10分' },
                { date: '2026/02/08', type: 'point', time: '19:30', name: 'Maison Margaux (晚餐)', stay: '90分', category: 'food' },
                // Day 3
                { date: '2026/02/09', type: 'point', time: '09:00', name: '太陽噴泉', stay: '30分', category: 'view' },
                { date: '2026/02/09', type: 'move', time: '5分' },
                { date: '2026/02/09', type: 'point', time: '10:00', name: 'Place Masséna', stay: '60分', category: 'view' },
                { date: '2026/02/09', type: 'move', time: '15分' },
                { date: '2026/02/09', type: 'point', time: '12:00', name: 'Gusti Restaurant', stay: '90分', category: 'food' },
                { date: '2026/02/09', type: 'move', time: '20分' },
                { date: '2026/02/09', type: 'point', time: '14:00', name: '城堡山公園', stay: '90分', category: 'view' },
                { date: '2026/02/09', type: 'move', time: '15分' },
                { date: '2026/02/09', type: 'point', time: '16:00', name: '賽雷亞花果市集', stay: '60分', category: 'shopping' },
                { date: '2026/02/09', type: 'move', time: '10分' },
                { date: '2026/02/09', type: 'point', time: '18:00', name: 'Peixes (晚餐)', stay: '90分', category: 'food' },
                // Day 4
                { date: '2026/02/10', type: 'point', time: '09:00', name: '尼斯主教座堂', stay: '45分', category: 'view' },
                { date: '2026/02/10', type: 'move', time: '10分' },
                { date: '2026/02/10', type: 'point', time: '10:00', name: '尼斯老城', stay: '90分', category: 'view' },
                { date: '2026/02/10', type: 'move', time: '40分' },
                { date: '2026/02/10', type: 'point', time: '13:00', name: 'Èze Village (埃茲山城)', stay: '60分', category: 'view' },
                { date: '2026/02/10', type: 'move', time: '5分' },
                { date: '2026/02/10', type: 'point', time: '14:30', name: 'Jardin Exotique d’Èze', stay: '60分', category: 'view' },
                { date: '2026/02/10', type: 'move', time: '30分' },
                { date: '2026/02/10', type: 'point', time: '16:30', name: '摩納哥親王宮', stay: '90分', category: 'view' },
                // Day 5
                { date: '2026/02/11', type: 'point', time: '08:00', name: '尼斯藍色海岸機場 (搭機)', isFlight: true, category: 'flight', note: '航班 09:40-11:20' },
                { date: '2026/02/11', type: 'point', time: '11:30', name: '里斯本機場 (抵達)', isFlight: true, category: 'flight' },
                { date: '2026/02/11', type: 'move', time: '30分' },
                { date: '2026/02/11', type: 'point', time: '12:30', name: 'The Visionaire Apartments (入住)', stay: 'Stay', category: 'stay' },
                { date: '2026/02/11', type: 'move', time: '10分' },
                { date: '2026/02/11', type: 'point', time: '13:30', name: 'Fábrica da Nata (蛋塔)', stay: '45分', category: 'food' },
                { date: '2026/02/11', type: 'move', time: '15分' },
                { date: '2026/02/11', type: 'point', time: '15:00', name: '奧古斯塔街拱門', stay: '60分', category: 'view' },
                { date: '2026/02/11', type: 'move', time: '10分' },
                { date: '2026/02/11', type: 'point', time: '17:00', name: 'Nova Wine Bar', stay: '90分', category: 'food' },
                { date: '2026/02/11', type: 'move', time: '10分' },
                { date: '2026/02/11', type: 'point', time: '19:00', name: '聖胡斯塔升降機', stay: '60分', category: 'view' },
                // Day 6
                { date: '2026/02/12', type: 'point', time: '09:30', name: '聖若熱城堡', stay: '120分', category: 'view' },
                { date: '2026/02/12', type: 'move', time: '15分' },
                { date: '2026/02/12', type: 'point', time: '11:30', name: 'Café da Garagem', stay: '60分', category: 'food' },
                { date: '2026/02/12', type: 'move', time: '10分' },
                { date: '2026/02/12', type: 'point', time: '13:30', name: '恩寵觀景台', stay: '60分', category: 'view' },
                { date: '2026/02/12', type: 'move', time: '20分' },
                { date: '2026/02/12', type: 'point', time: '15:30', name: 'Moona Chicken', stay: '60分', category: 'food' },
                { date: '2026/02/12', type: 'move', time: '30分' },
                { date: '2026/02/12', type: 'point', time: '18:30', name: 'Uma Marisqueira (海鮮燉飯)', stay: '90分', category: 'food' },
                // Day 7
                { date: '2026/02/13', type: 'point', time: '09:00', name: 'Casa Pastéis de Belém', stay: '60分', category: 'food' },
                { date: '2026/02/13', type: 'move', time: '5分' },
                { date: '2026/02/13', type: 'point', time: '10:30', name: 'Church of Saint Mary of Bethlehem', stay: '45分', category: 'view' },
                { date: '2026/02/13', type: 'move', time: '5分' },
                { date: '2026/02/13', type: 'point', time: '11:30', name: '熱羅尼莫斯修道院', stay: '90分', category: 'view' },
                { date: '2026/02/13', type: 'move', time: '15分' },
                { date: '2026/02/13', type: 'point', time: '13:30', name: '發現者紀念碑', stay: '60分', category: 'view' },
                { date: '2026/02/13', type: 'move', time: '15分' },
                { date: '2026/02/13', type: 'point', time: '15:00', name: '貝倫塔', stay: '90分', category: 'view' },
                // Day 8
                { date: '2026/02/14', type: 'point', time: '09:00', name: '搭乘火車前往波多', category: 'flight', note: '約3.5小時' },
                { date: '2026/02/14', type: 'point', time: '12:30', name: '聖本圖車站 Porto São Bento', stay: '抵達', category: 'view' },
                { date: '2026/02/14', type: 'move', time: '10分' },
                { date: '2026/02/14', type: 'point', time: '14:00', name: '波爾圖主教座堂', stay: '60分', category: 'view' },
                { date: '2026/02/14', type: 'move', time: '15分' },
                { date: '2026/02/14', type: 'point', time: '15:30', name: 'Miradouro da Vitória', stay: '45分', category: 'view' },
                { date: '2026/02/14', type: 'move', time: '10分' },
                { date: '2026/02/14', type: 'point', time: '17:00', name: '利貝拉區 Ribeira do Porto', stay: '90分', category: 'view' },
                { date: '2026/02/14', type: 'move', time: '10分' },
                { date: '2026/02/14', type: 'point', time: '19:00', name: 'Taberna Dos Mercadores', stay: '120分', category: 'food' },
                // Day 9
                { date: '2026/02/15', type: 'point', time: '09:00', name: '萊羅書店', stay: '90分', category: 'view' },
                { date: '2026/02/15', type: 'move', time: '10分' },
                { date: '2026/02/15', type: 'point', time: '11:00', name: 'Torre dos Clérigos', stay: '60分', category: 'view' },
                { date: '2026/02/15', type: 'move', time: '10分' },
                { date: '2026/02/15', type: 'point', time: '13:00', name: '卡爾莫教堂', stay: '45分', category: 'view' },
                { date: '2026/02/15', type: 'move', time: '10分' },
                { date: '2026/02/15', type: 'point', time: '14:30', name: 'Conga (豬扒包)', stay: '60分', category: 'food' },
                { date: '2026/02/15', type: 'move', time: '20分' },
                { date: '2026/02/15', type: 'point', time: '16:30', name: '路易一世大橋', stay: '60分', category: 'view' },
                { date: '2026/02/15', type: 'move', time: '10分' },
                { date: '2026/02/15', type: 'point', time: '18:00', name: 'Sandeman (酒莊)', stay: '90分', category: 'food' },
                { date: '2026/02/15', type: 'move', time: '10分' },
                { date: '2026/02/15', type: 'point', time: '19:30', name: 'Jardim do Morro (夕陽)', stay: '60分', category: 'view' },
                // Day 10
                { date: '2026/02/16', type: 'point', time: '09:30', name: '波爾豪市場 Mercado do Bolhão', stay: '90分', category: 'shopping' },
                { date: '2026/02/16', type: 'move', time: '5分' },
                { date: '2026/02/16', type: 'point', time: '11:30', name: '聖卡塔琳娜街 (購物街)', stay: '120分', category: 'shopping' },
                { date: '2026/02/16', type: 'move', time: '10分' },
                { date: '2026/02/16', type: 'point', time: '13:30', name: 'Cachorrinho Gazela', stay: '60分', category: 'food' },
                { date: '2026/02/16', type: 'move', time: '20分' },
                { date: '2026/02/16', type: 'point', time: '15:30', name: 'Pingo Doce (超市)', stay: '60分', category: 'shopping' },
                { date: '2026/02/16', type: 'move', time: '30分' },
                { date: '2026/02/16', type: 'point', time: '18:30', name: 'Brasão Aliados', stay: '90分', category: 'food' }
            ];

            const filteredItinerary = computed(() => allPoints.filter(p => p.date === selectedDate.value));

            const totalExpense = computed(() => expenseList.value.reduce((sum, e) => sum + Number(e.amount), 0));
            const removeExpense = (i) => expenseList.value.splice(i, 1);
            const openAddExpense = () => {
                const n = prompt("消費名稱？", "午餐");
                const a = prompt("金額 (日幣)？", "2000");
                if(n && a) expenseList.value.push({ name:n, amount:a, pay:"信用卡", date: new Date().toLocaleDateString() });
            };

            watch(expenseList, (v) => localStorage.setItem('trip_expenses_v2', JSON.stringify(v)), {deep:true});

            onMounted(() => {
                lucide.createIcons();
                setInterval(() => lucide.createIcons(), 800);
            });

            return {
                currentTab, selectedDate, travelDates, filteredItinerary,
                tabs, euroInput, expenseList, totalExpense, removeExpense, openAddExpense,
                getIcon: (c) => ({ flight:'plane', stay:'home', food:'utensils', view:'camera', shopping:'shopping-bag' }[c] || 'map-pin'),
                tabStyle: (id) => `w-12 h-12 rounded-2xl flex items-center justify-center transition-all ${currentTab.value === id ? 'bg-orange-500 text-white shadow-lg' : 'glass-tab text-orange-500'}`,
                openMap: (q) => window.open(`https://www.google.com/maps/search/${encodeURIComponent(q)}`, '_blank'),
                stays: [
                    { place: 'ibis Paris Gare de Lyon', date: '2/7-2/8' },
                    { place: '5 Rue Gustave Deloye (Nice)', date: '2/8-2/11' },
                    { place: 'The Visionaire (Lisbon)', date: '2/11-2/14' },
                    { place: 'Legends\' House (Porto)', date: '2/14-2/17' }
                ]
            };
        }
    }).mount('#app');
</script>

</body>
</html>
